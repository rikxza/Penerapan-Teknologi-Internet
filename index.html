<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spesifikasi Teknis Moneygement - Dokumen Interaktif</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f5f5f4; color: #1c1917; }
        .chart-container { position: relative; width: 100%; max-width: 100%; height: 300px; max-height: 400px; margin: 0 auto; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .nav-active { border-bottom: 2px solid #0f766e; color: #0f766e; font-weight: 600; }
        .process-step { position: relative; padding-left: 2rem; border-left: 2px solid #e5e7eb; padding-bottom: 2rem; }
        .process-step::before { content: ''; position: absolute; left: -0.6rem; top: 0; width: 1.2rem; height: 1.2rem; background: #fff; border: 2px solid #0f766e; border-radius: 50%; }
        .sprint-detail-row:hover { background-color: #fcfcfc; }
    </style>
    <!-- Chosen Palette: Stone & Teal (Professional Finance) -->
    <!-- Application Structure:
         1. Overview: Context & Team.
         2. Business Process: NEW SECTION - Detailed flow of system operations.
         3. Database: Interactive ERD with all tables from docs.
         4. AI Logic: Detailed prompt engineering for 3 AI features.
         5. Wireframe: UI Mockup.
         6. Timeline: Granular task distribution per member.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-stone-50 min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-teal-700 tracking-tight">Moneygement<span class="text-stone-500 text-sm font-normal ml-2">| Blueprint</span></span>
                </div>
                <div class="hidden lg:flex space-x-6 items-center" id="nav-container">
                    <button onclick="switchTab('overview')" class="nav-item px-2 py-2 text-sm font-medium text-stone-600 hover:text-teal-600 transition" id="nav-overview">Overview</button>
                    <button onclick="switchTab('business-process')" class="nav-item px-2 py-2 text-sm font-medium text-stone-600 hover:text-teal-600 transition" id="nav-business-process">Alur Bisnis</button>
                    <button onclick="switchTab('database')" class="nav-item px-2 py-2 text-sm font-medium text-stone-600 hover:text-teal-600 transition" id="nav-database">Database (ERD)</button>
                    <button onclick="switchTab('ai-logic')" class="nav-item px-2 py-2 text-sm font-medium text-stone-600 hover:text-teal-600 transition" id="nav-ai-logic">Integrasi AI</button>
                    <button onclick="switchTab('wireframe')" class="nav-item px-2 py-2 text-sm font-medium text-stone-600 hover:text-teal-600 transition" id="nav-wireframe">Mockup UI</button>
                    <button onclick="switchTab('timeline')" class="nav-item nav-active px-2 py-2 text-sm font-medium text-stone-600 hover:text-teal-600 transition" id="nav-timeline">Tugas Detail</button>
                </div>
                <div class="lg:hidden flex items-center">
                    <button id="mobile-menu-btn" class="text-stone-500 text-2xl">‚ò∞</button>
                </div>
            </div>
        </div>
        <!-- Mobile Nav Panel -->
        <div id="mobile-menu" class="hidden lg:hidden bg-white border-b border-stone-200 p-4 space-y-2">
            <button onclick="switchTab('overview')" class="block w-full text-left px-3 py-2 rounded hover:bg-stone-100">Overview</button>
            <button onclick="switchTab('business-process')" class="block w-full text-left px-3 py-2 rounded hover:bg-stone-100">Alur Bisnis</button>
            <button onclick="switchTab('database')" class="block w-full text-left px-3 py-2 rounded hover:bg-stone-100">Database</button>
            <button onclick="switchTab('ai-logic')" class="block w-full text-left px-3 py-2 rounded hover:bg-stone-100">AI Logic</button>
            <button onclick="switchTab('timeline')" class="block w-full text-left px-3 py-2 rounded hover:bg-stone-100">Pembagian Tugas</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- 1. OVERVIEW -->
        <div id="view-overview" class="view-section hidden space-y-8 animate-fade-in">
            <div class="bg-white rounded-xl shadow-sm border border-stone-200 p-8">
                <h1 class="text-3xl font-bold text-stone-800 mb-2">Perancangan Sistem Moneygement</h1>
                <p class="text-stone-500 mb-6">Dokumen Teknis Kelompok 3 (IF-1)</p>
                <div class="prose max-w-none text-stone-600">
                    <p>Dokumen ini merupakan cetak biru (blueprint) pengembangan aplikasi Moneygement. Sistem ini dibangun dengan arsitektur <strong>MVC (Model-View-Controller)</strong> menggunakan Laravel, dengan keunggulan integrasi <strong>OpenAI API</strong> untuk analisis keuangan cerdas.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                    <div class="bg-stone-50 p-4 rounded border border-stone-100">
                        <strong class="text-teal-700">Manajer Proyek</strong>
                        <p class="text-sm mt-1">Rikza Danan Irdian</p>
                    </div>
                    <div class="bg-stone-50 p-4 rounded border border-stone-100">
                        <strong class="text-teal-700">Platform</strong>
                        <p class="text-sm mt-1">Web (Responsive Mobile-First)</p>
                    </div>
                    <div class="bg-stone-50 p-4 rounded border border-stone-100">
                        <strong class="text-teal-700">Metode</strong>
                        <p class="text-sm mt-1">Waterfall / Hybrid Agile</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. BUSINESS PROCESS FLOW (NEW) -->
        <div id="view-business-process" class="view-section hidden animate-fade-in">
            <h2 class="text-2xl font-bold text-stone-800 mb-6">Alur Proses Bisnis & Sistem</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Flow 1: Core Loop -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-lg font-bold text-stone-800 mb-4 border-b pb-2">üîÑ Siklus Utama (Core Loop)</h3>
                    
                    <div class="process-step">
                        <h4 class="font-bold text-stone-800">1. Inisialisasi Anggaran (Budgeting)</h4>
                        <p class="text-sm text-stone-600 mt-1">User menetapkan batas pengeluaran per kategori (Misal: Makan = Rp 1jt) di awal bulan.</p>
                        <div class="mt-2 text-xs bg-stone-100 inline-block px-2 py-1 rounded text-stone-500">Tabel: Budgets, Categories</div>
                    </div>
                    
                    <div class="process-step">
                        <h4 class="font-bold text-stone-800">2. Pencatatan Transaksi</h4>
                        <p class="text-sm text-stone-600 mt-1">User input data transaksi. Ada 2 cara:</p>
                        <ul class="list-disc pl-4 text-xs text-stone-500 mt-1">
                            <li><strong>Manual:</strong> Ketik nominal & pilih kategori.</li>
                            <li><strong>AI Scan:</strong> Upload foto struk -> OCR -> Auto-fill.</li>
                        </ul>
                    </div>
                    
                    <div class="process-step">
                        <h4 class="font-bold text-stone-800">3. Validasi & Kalkulasi Sistem</h4>
                        <p class="text-sm text-stone-600 mt-1">Backend memproses data:</p>
                        <ul class="list-disc pl-4 text-xs text-stone-500 mt-1">
                            <li>Kurangi saldo total.</li>
                            <li>Cek sisa anggaran kategori.</li>
                            <li>Jika (Pengeluaran > 80% Budget) -> <strong>Trigger Notifikasi</strong>.</li>
                        </ul>
                    </div>

                    <div class="process-step border-l-0 pb-0">
                        <h4 class="font-bold text-stone-800">4. Analisis & Reporting</h4>
                        <p class="text-sm text-stone-600 mt-1">User melihat grafik dashboard atau download laporan PDF bulanan.</p>
                    </div>
                </div>

                <!-- Flow 2: AI Workflow -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-lg font-bold text-stone-800 mb-4 border-b pb-2">ü§ñ Alur Kerja AI (Intelligent Features)</h3>
                    
                    <div class="process-step">
                        <h4 class="font-bold text-stone-800">Trigger: User Request</h4>
                        <p class="text-sm text-stone-600 mt-1">User menekan tombol "Analisis Keuangan Saya" di Dashboard.</p>
                    </div>
                    
                    <div class="process-step">
                        <h4 class="font-bold text-stone-800">Data Aggregation</h4>
                        <p class="text-sm text-stone-600 mt-1">Backend Laravel mengambil data transaksi 30 hari terakhir dari database MySQL.</p>
                        <div class="mt-2 text-xs font-mono bg-stone-900 text-stone-300 inline-block px-2 py-1 rounded">Transaction::where(...)->get()</div>
                    </div>
                    
                    <div class="process-step">
                        <h4 class="font-bold text-stone-800">AI Processing (OpenAI API)</h4>
                        <p class="text-sm text-stone-600 mt-1">Data dikirim ke OpenAI dengan prompt khusus: "Analisis pola ini, cari pemborosan, beri saran."</p>
                    </div>
                    
                    <div class="process-step border-l-0 pb-0">
                        <h4 class="font-bold text-stone-800">Result Presentation</h4>
                        <p class="text-sm text-stone-600 mt-1">Respon JSON dari AI ditampilkan di Dashboard sebagai "Kartu Insight" (Rekomendasi Hemat & Prediksi).</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. DATABASE (ERD) -->
        <div id="view-database" class="view-section hidden space-y-8 animate-fade-in">
             <div class="bg-teal-50 border-l-4 border-teal-600 p-4 rounded-r-lg flex justify-between items-center">
                <div>
                    <h3 class="font-bold text-teal-800">Entity Relationship Diagram (ERD)</h3>
                    <p class="text-teal-700 text-sm">Klik tabel untuk melihat detail kolom. Struktur ini wajib diterapkan di Laravel Migrations.</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="space-y-3" id="db-tables-container">
                    <!-- Tables populated by JS -->
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-stone-200 p-6 sticky top-24 h-fit">
                    <div id="db-detail-panel">
                        <div class="text-center text-stone-400 py-10">
                            <span class="text-4xl">üóÉÔ∏è</span>
                            <p class="mt-2">Pilih tabel untuk detail</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. AI LOGIC (DETAILED) -->
        <div id="view-ai-logic" class="view-section hidden animate-fade-in">
            <h2 class="text-2xl font-bold text-stone-800 mb-6">Integrasi & Logika AI</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Logic 1: Scan Receipt -->
                <div class="bg-white p-6 rounded-xl border border-stone-200">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded">Fitur: Scan Struk</span>
                        <h3 class="font-bold">OCR & Extraction</h3>
                    </div>
                    <div class="bg-stone-900 text-stone-300 p-3 rounded text-xs font-mono overflow-auto h-32 mb-4">
                        // Prompt Logic
                        "Extract data from this receipt image. 
                        Return JSON only:
                        {
                          'merchant': string,
                          'date': 'YYYY-MM-DD',
                          'items': [{name, price}],
                          'total': number,
                          'category_prediction': 'Makan/Transport/...'
                        }"
                    </div>
                    <button onclick="simulateAI('scan')" class="w-full bg-stone-100 hover:bg-stone-200 py-2 rounded text-stone-700 text-sm font-medium">Test Simulasi</button>
                    <div id="result-scan" class="hidden mt-3 p-3 bg-green-50 text-green-800 text-xs font-mono rounded border border-green-200"></div>
                </div>

                <!-- Logic 2: Financial Advisor -->
                <div class="bg-white p-6 rounded-xl border border-stone-200">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="bg-purple-100 text-purple-800 text-xs font-bold px-2 py-1 rounded">Fitur: Advisor</span>
                        <h3 class="font-bold">Analisis Pola & Saran</h3>
                    </div>
                    <div class="bg-stone-900 text-stone-300 p-3 rounded text-xs font-mono overflow-auto h-32 mb-4">
                        // Prompt Logic
                        "Analyze these transactions: [JSON_DATA].
                        Identify:
                        1. Biggest expense category.
                        2. Unusual spending (anomalies).
                        3. Give 3 practical saving tips based on the data.
                        Tone: Friendly Financial Advisor."
                    </div>
                    <button onclick="simulateAI('advice')" class="w-full bg-stone-100 hover:bg-stone-200 py-2 rounded text-stone-700 text-sm font-medium">Test Simulasi</button>
                    <div id="result-advice" class="hidden mt-3 p-3 bg-purple-50 text-purple-900 text-sm rounded border border-purple-200"></div>
                </div>
            </div>
        </div>

        <!-- 5. WIREFRAME -->
        <div id="view-wireframe" class="view-section hidden animate-fade-in">
             <div class="border-4 border-stone-800 rounded-2xl overflow-hidden bg-stone-100 shadow-xl max-w-5xl mx-auto">
                <div class="bg-stone-800 px-4 py-2 flex items-center gap-2">
                    <div class="w-3 h-3 rounded-full bg-red-500"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    <div class="ml-4 text-xs text-stone-400 font-mono">dashboard.blade.php preview</div>
                </div>
                <div class="flex h-[500px]">
                    <div class="w-56 bg-white border-r p-4 hidden md:block">
                        <div class="font-bold text-teal-700 mb-6">Moneygement</div>
                        <div class="space-y-2 text-sm text-stone-600">
                            <div class="bg-teal-50 text-teal-700 px-2 py-1 rounded">Dashboard</div>
                            <div class="px-2 py-1">Transaksi</div>
                            <div class="px-2 py-1">Budgeting</div>
                        </div>
                    </div>
                    <div class="flex-1 p-6 bg-stone-50 overflow-y-auto">
                        <h2 class="font-bold text-xl mb-4">Dashboard</h2>
                        <div class="grid grid-cols-3 gap-4 mb-4">
                            <div class="bg-white p-3 rounded shadow-sm border"><div class="text-xs text-stone-500">Saldo</div><div class="font-bold text-lg">Rp 4.5Jt</div></div>
                            <div class="bg-white p-3 rounded shadow-sm border"><div class="text-xs text-stone-500">Masuk</div><div class="font-bold text-green-600">Rp 8Jt</div></div>
                            <div class="bg-white p-3 rounded shadow-sm border"><div class="text-xs text-stone-500">Keluar</div><div class="font-bold text-red-500">Rp 3.5Jt</div></div>
                        </div>
                        <div class="bg-indigo-50 border border-indigo-100 p-3 rounded mb-4 flex gap-3">
                            <div class="text-2xl">ü§ñ</div>
                            <div>
                                <div class="font-bold text-indigo-900 text-sm">AI Insight</div>
                                <div class="text-xs text-indigo-800">"Pengeluaran Kopi kamu naik 15%. Kurangi beli di luar untuk hemat Rp 200rb."</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-white p-3 rounded border h-48 chart-container"><canvas id="wfLineChart"></canvas></div>
                            <div class="bg-white p-3 rounded border h-48 chart-container"><canvas id="wfPieChart"></canvas></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. TIMELINE & TASKS (DETAILED BREAKDOWN) -->
        <div id="view-timeline" class="view-section space-y-8 animate-fade-in">
            <div class="bg-white rounded-xl shadow-sm border border-stone-200 p-6">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-stone-800">Pembagian Tugas Mendetail</h2>
                        <p class="text-stone-500">Roadmap 5 Sprint dengan rincian granular per anggota.</p>
                    </div>
                    <div class="text-right hidden md:block">
                        <div class="text-sm font-bold text-teal-700">Estimasi: 7 Minggu</div>
                        <div class="text-xs text-stone-400">Dimulai: Fleksibel</div>
                    </div>
                </div>

                <!-- GANTT CHART -->
                <div class="chart-container relative w-full h-[250px] mb-8">
                    <canvas id="timelineChart"></canvas>
                </div>

                <!-- DETAILED TASK LIST -->
                <div class="space-y-6" id="sprint-container">
                    <!-- Tasks will be injected here via JS -->
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-white border-t border-stone-200 py-6 mt-auto text-center text-stone-400 text-sm">
        <p>Blueprint Moneygement - Kelompok 3</p>
    </footer>

    <script>
        // --- DATA ---
        const dbTables = {
            users: { desc: "Akun Pengguna", cols: ["id (PK)", "name", "email", "password", "avatar_path", "created_at"] },
            categories: { desc: "Kategori Transaksi", cols: ["id (PK)", "user_id (FK)", "name (ex: Makan)", "type (income/expense)", "icon"] },
            transactions: { desc: "Data Pemasukan/Pengeluaran", cols: ["id (PK)", "user_id (FK)", "category_id (FK)", "amount", "date", "description", "receipt_image", "is_ai_scan"] },
            budgets: { desc: "Batas Anggaran", cols: ["id (PK)", "user_id (FK)", "category_id (FK)", "amount_limit", "month (YYYY-MM)"] },
            notifications: { desc: "Notifikasi Sistem", cols: ["id (PK)", "user_id (FK)", "title", "message", "is_read", "type (budget_alert/system)"] },
            settings: { desc: "Pengaturan User", cols: ["id (PK)", "user_id (FK)", "theme (dark/light)", "language", "currency"] }
        };

        const sprints = [
            {
                title: "Sprint 1: Pondasi & Manajemen User",
                period: "Minggu 1",
                focus: "Setup, Database, Auth",
                tasks: [
                    { role: "Dandy (Backend)", items: ["Install Laravel & Setup Git Repository", "Buat Migration tabel 'users' & 'categories'", "Implementasi Logic Register & Login (Auth)", "Setup Middleware Role (User/Admin)"] },
                    { role: "Reyhan (Frontend)", items: ["Slicing Layout Utama (Blade Layout)", "Buat Halaman Login & Register (Tailwind)", "Buat Sidebar & Navbar Component"] },
                    { role: "Cheryl (UI/UX)", items: ["Finalisasi High-Fidelity Design di Figma", "Export Assets (Logo, Icon) untuk Dev"] },
                    { role: "Rikza (PM)", items: ["Setup Project Management Tools (Trello/Jira)", "Riset Library OpenAI untuk PHP"] }
                ]
            },
            {
                title: "Sprint 2: Transaksi & Budgeting (Core)",
                period: "Minggu 2-3",
                focus: "CRUD Transaksi, Upload, Budget Logic",
                tasks: [
                    { role: "Dandy (Backend)", items: ["API/Controller untuk Create/Read/Update/Delete Transaksi", "Logic pengurangan saldo user", "Logic Pengecekan Budget (Alert System)"] },
                    { role: "Dhaffa (Support)", items: ["Fitur Upload Gambar (Struk) ke Storage", "Validasi File (Max 2MB, JPG/PNG)", "Seeder Data Dummy untuk Testing"] },
                    { role: "Reyhan (Frontend)", items: ["Form Input Transaksi (Datepicker, Dropdown Kategori)", "Tampilan List Riwayat Transaksi (Tabel)", "Modal Pop-up Detail Transaksi"] },
                    { role: "Rikza (PM)", items: ["Quality Control Fitur Transaksi"] }
                ]
            },
            {
                title: "Sprint 3: Dashboard & Reporting",
                period: "Minggu 4",
                focus: "Visualisasi Data, Filter, Export",
                tasks: [
                    { role: "Reyhan (Frontend)", items: ["Integrasi Chart.js (Line Chart Tren Harian)", "Integrasi Chart.js (Pie Chart Kategori)", "Styling Dashboard Responsif Mobile"] },
                    { role: "Dhaffa (Backend)", items: ["Logic Filter Laporan (By Date Range, Category)", "Install Library DOMPDF / Excel", "Buat Fitur Export Transaksi ke PDF"] },
                    { role: "Dandy (Backend)", items: ["API Endpoint untuk Data Chart (JSON format)"] },
                    { role: "Cheryl (QA)", items: ["Test Filter Laporan (Pastikan data akurat)"] }
                ]
            },
            {
                title: "Sprint 4: Integrasi Kecerdasan Buatan (AI)",
                period: "Minggu 5-6",
                focus: "OpenAI Service, OCR, Analysis",
                tasks: [
                    { role: "Rikza (AI Engineer)", items: ["Buat 'OpenAIService' Class di Laravel", "Implementasi Prompt untuk OCR Struk", "Implementasi Prompt untuk Analisis Keuangan"] },
                    { role: "Dandy (Backend)", items: ["Endpoint '/api/ai/scan' & '/api/ai/analyze'", "Handling Timeout/Error dari API AI"] },
                    { role: "Reyhan (Frontend)", items: ["Loading Animation saat AI berpikir", "UI Kartu 'Saran AI' di Dashboard"] },
                    { role: "Dhaffa (Support)", items: ["Simpan hasil saran AI ke database (opsional)"] }
                ]
            },
            {
                title: "Sprint 5: Finishing & UAT",
                period: "Minggu 7",
                focus: "Testing, Bugfix, Deployment",
                tasks: [
                    { role: "Cheryl (QA)", items: ["Full System Testing (Blackbox)", "Cek Responsivitas di HP", "Buat User Manual / Dokumentasi"] },
                    { role: "All Team", items: ["Bug Fixing (Prioritas Critical)", "Deployment ke Hosting (Shared/VPS)", "Latihan Presentasi"] }
                ]
            }
        ];

        // --- RENDERERS ---

        function renderDB() {
            const container = document.getElementById('db-tables-container');
            container.innerHTML = Object.entries(dbTables).map(([name, data]) => `
                <div class="bg-white p-4 rounded-lg border border-stone-200 cursor-pointer hover:border-teal-500 transition" onclick="showTableDetail('${name}')">
                    <div class="flex justify-between items-center">
                        <div>
                            <h4 class="font-bold text-stone-800 text-lg font-mono">${name}</h4>
                            <p class="text-xs text-stone-500">${data.desc}</p>
                        </div>
                        <span class="text-teal-600">‚ûî</span>
                    </div>
                </div>
            `).join('');
        }

        function showTableDetail(name) {
            const table = dbTables[name];
            const panel = document.getElementById('db-detail-panel');
            panel.innerHTML = `
                <h3 class="text-xl font-bold font-mono text-stone-800 border-b pb-2 mb-4">${name}</h3>
                <ul class="space-y-2">
                    ${table.cols.map(col => `
                        <li class="flex justify-between text-sm">
                            <span class="font-mono text-teal-700 font-medium">${col.split(' ')[0]}</span>
                            <span class="text-stone-500 text-xs">${col.split(' ').slice(1).join(' ')}</span>
                        </li>
                    `).join('')}
                </ul>
            `;
        }

        function renderSprints() {
            const container = document.getElementById('sprint-container');
            container.innerHTML = sprints.map((sprint, idx) => `
                <div class="border border-stone-200 rounded-lg overflow-hidden">
                    <div class="bg-stone-50 px-6 py-4 border-b border-stone-200 flex justify-between items-center">
                        <div>
                            <h3 class="font-bold text-stone-800 text-lg">${sprint.title}</h3>
                            <p class="text-sm text-stone-500">${sprint.period} ‚Ä¢ Fokus: ${sprint.focus}</p>
                        </div>
                        <span class="bg-stone-200 text-stone-600 text-xs font-bold px-2 py-1 rounded">Sprint ${idx+1}</span>
                    </div>
                    <div class="bg-white p-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            ${sprint.tasks.map(t => `
                                <div>
                                    <strong class="text-teal-700 text-sm block mb-2">${t.role}</strong>
                                    <ul class="list-disc pl-4 space-y-1">
                                        ${t.items.map(item => `<li class="text-xs text-stone-600 leading-relaxed">${item}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function initCharts() {
            // Timeline
            new Chart(document.getElementById('timelineChart'), {
                type: 'bar',
                data: {
                    labels: sprints.map(s => s.title.split(':')[0]),
                    datasets: [{
                        label: 'Minggu',
                        data: [3, 3, 3, 3, 2],
                        backgroundColor: ['#d6d3d1', '#5eead4', '#2dd4bf', '#0f766e', '#fca5a5'],
                        borderRadius: 4
                    }]
                },
                options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });

            // Wireframe Charts (Small)
            new Chart(document.getElementById('wfLineChart'), {
                type: 'line',
                data: { labels: ['1','10','20','30'], datasets: [{ data: [10,25,15,40], borderColor: '#0f766e', tension: 0.4 }] },
                options: { plugins: { legend: { display: false } }, maintainAspectRatio: false }
            });
            new Chart(document.getElementById('wfPieChart'), {
                type: 'doughnut',
                data: { labels: ['A','B','C'], datasets: [{ data: [30,50,20], backgroundColor: ['#ccfbf1','#5eead4','#0f766e'] }] },
                options: { plugins: { legend: { display: false } }, maintainAspectRatio: false }
            });
        }

        function simulateAI(type) {
            const res = document.getElementById(type === 'scan' ? 'result-scan' : 'result-advice');
            res.classList.remove('hidden');
            res.innerHTML = "Processing...";
            setTimeout(() => {
                if(type === 'scan') res.innerHTML = `{ "merchant": "Indomaret", "total": 45500, "items": [...] }`;
                else res.innerHTML = `"Kamu boros di kategori 'Jajan' (Rp 500rb). Saran: Bawa bekal & batasi GoFood."`;
            }, 1000);
        }

        function switchTab(id) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.getElementById('view-' + id).classList.remove('hidden');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('nav-active'));
            document.getElementById('nav-' + id).classList.add('nav-active');
            document.getElementById('mobile-menu').classList.add('hidden');
        }

        document.getElementById('mobile-menu-btn').addEventListener('click', () => document.getElementById('mobile-menu').classList.toggle('hidden'));

        // Init
        window.addEventListener('DOMContentLoaded', () => {
            renderDB();
            renderSprints();
            initCharts();
            switchTab('timeline'); // Default view as requested
        });
    </script>
</body>
</html>
